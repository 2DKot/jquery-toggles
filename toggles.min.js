(function(e){e.fn.toggles=function(j){var j=j||{},b={dragable:!0,clickable:!0,ontext:"ON",offtext:"OFF",on:!0,animtime:300,click:this},f;for(f in j)j.hasOwnProperty(f)&&(b[f]=j[f]);f="margin-left "+b.animtime/1E3+"s ease-in-out";var n={"-webkit-transition":f,"-moz-transition":f,transition:f},o={"-webkit-transition":"","-moz-transition":"",transition:""};this.each(function(){function f(e){c.off("mousemove");i.off("mouseleave");g.off("mouseup");i.hasClass("active")?h<(-d+a)/2?c.trigger("toggle"):k.animate({marginLeft:0},
b.animtime/2):h>(d-a)/2?c.trigger("toggle"):k.animate({marginLeft:-d+a},b.animtime/2);0===h&&(b.clickable&&"mouseleave"!=e.type)&&c.trigger("toggle")}var c=e(this);b.click=j.click||c;var a=c.height(),d=c.width();if(0===a||0===d)c.height(a=20),c.width(d=50);var i=e('<div class="slide" />'),k=e('<div class="inner" />'),l=e('<div class="on" />'),m=e('<div class="off" />'),g=e('<div class="blob" />');l.css({height:a,width:d-a/2,textAlign:"center",textIndent:-a/2,lineHeight:a+"px"}).text(b.ontext);m.css({height:a,
width:d-a/2,marginLeft:-a/2,textAlign:"center",textIndent:a/2,lineHeight:a+"px"}).text(b.offtext);g.css({height:a,width:a,marginLeft:-a/2});k.css({width:2*d-a,marginLeft:b.on?0:-d+a});b.on&&(i.addClass("active"),b.checkbox&&e(b.checkbox).attr("checked",!0));c.html("");c.append(i.append(k.append(l,g,m)));var h=0;c.on("toggle",function(){var c=i,f=d,h=a,g=c.find(".inner");c.toggleClass("active");g.css(n);if(c.hasClass("active")){g.css({marginLeft:0});b.checkbox&&e(b.checkbox).attr("checked",true)}else{g.css({marginLeft:-f+
h});b.checkbox&&e(b.checkbox).attr("checked",false)}setTimeout(function(){g.css(o)},b.animtime*1.1)});b.clickable&&b.click.click(function(a){(a.target!=g[0]||!b.dragable)&&c.trigger("toggle")});if(b.dragable)g.on("mousedown",function(b){h=0;g.off("mouseup");i.off("mouseleave");var e=b.pageX;c.on("mousemove",g,function(b){h=b.pageX-e;i.hasClass("active")?k.css({marginLeft:h<0?h<-d+a?-d+a:h:0}):k.css({marginLeft:h>0?h>d-a?0:h-d+a:-d+a})});g.on("mouseup",f);i.on("mouseleave",f)})})}})(jQuery);