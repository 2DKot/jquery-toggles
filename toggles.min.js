(function($){$.fn.toggles=function(b){function u(d,e,v){var c=d.toggleClass("active").hasClass("active"),h=d.find(".toggle-inner").css(w);d.find(".toggle-off").toggleClass("active");d.find(".toggle-on").toggleClass("active");a.checkbox.prop("checked",c);if(!k){var b=c?0:-e+v;h.css("margin-left",b);setTimeout(function(){h.css(x);h.css("margin-left",b)},a.animate)}}b=b||{};var a=$.extend({drag:!0,click:!0,text:{on:"ON",off:"OFF"},on:!0,animate:250,transition:"ease-in-out",checkbox:null,clicker:null,width:50,height:20,
type:"compact"},b),k="select"==a.type;a.checkbox=$(a.checkbox);a.clicker&&(a.clicker=$(a.clicker));b="margin-left "+a.animate+"ms "+a.transition;var w={"-webkit-transition":b,"-moz-transition":b,transition:b},x={"-webkit-transition":"","-moz-transition":"",transition:""};return this.each(function(){var d=$(this),e=d.height(),b=d.width();if(!e||!b)d.height(e=a.height),d.width(b=a.width);var c=$('<div class="toggle-slide">'),h=$('<div class="toggle-inner">'),p=$('<div class="toggle-on">'),r=$('<div class="toggle-off">'),
g=$('<div class="toggle-blob">');a.on&&p.addClass("active");var l=e/2,q=b-l;p.css({height:e,width:q,textAlign:"center",textIndent:k?"":-l,lineHeight:e+"px"}).text(a.text.on);r.css({height:e,width:q,marginLeft:k?"":-l,textAlign:"center",textIndent:k?"":l,lineHeight:e+"px"}).text(a.text.off);g.css({height:e,width:e,marginLeft:-l});h.css("width",2*b-e);k&&(d.css("width",2*q),g.hide());a.on&&(c.addClass("active"),a.checkbox.prop("checked",!0));d.html(c.html(h.append(p,g,r)));c.on("toggle",function(a,
f){a&&a.stopPropagation();d.trigger("toggle",f);u(c,b,e)});if(a.click&&(!a.clicker||!a.clicker.has(d).length))d.on("click",function(b){(b.target!=g[0]||!a.drag)&&c.trigger("toggle",!c.hasClass("active"))});if(a.clicker)a.clicker.on("click",function(b){(b.target!=g[0]||!a.drag)&&c.trigger("toggle",!c.hasClass("active"))});if(a.drag&&!k){var f,s=(b-e)/4,t=function(k){d.off("mousemove");c.off("mouseleave");g.off("mouseup");var n=c.hasClass("active");!f&&a.click&&"mouseleave"!==k.type?c.trigger("toggle",
!n):n?f<-s?c.trigger("toggle",!n):h.animate({marginLeft:0},a.animate/2):f>s?c.trigger("toggle",!n):h.animate({marginLeft:-b+e},a.animate/2)},m=-b+e;g.on("mousedown",function(a){f=0;g.off("mouseup");c.off("mouseleave");var b=a.pageX;d.on("mousemove",g,function(a){f=a.pageX-b;c.hasClass("active")?(a=f,0<f&&(a=0),f<m&&(a=m)):(a=f+m,0>f&&(a=m),f>-m&&(a=0));h.css("margin-left",a)});g.on("mouseup",t);c.on("mouseleave",t)})}})};})(jQuery);
