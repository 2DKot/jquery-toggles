(function($){$.fn.toggles=function(b){b=b||{};var a=$.extend({drag:!0,click:!0,text:{on:"ON",off:"OFF"},on:!0,animate:250,transition:"ease-in-out",checkbox:null,clicker:null,width:50,height:20,type:"compact"},b),h="select"==a.type;a.checkbox=$(a.checkbox);a.clicker&&(a.clicker=$(a.clicker));b="margin-left "+a.animate+"ms "+a.transition;var t={"-webkit-transition":b,"-moz-transition":b,transition:b},u={"-webkit-transition":"","-moz-transition":"",transition:""};return this.each(function(){var c=$(this),d=c.height(),
j=c.width();if(!d||!j)c.height(d=a.height),c.width(j=a.width);var g=$('<div class="toggle-slide">'),b=$('<div class="toggle-inner">'),n=$('<div class="toggle-on">'),q=$('<div class="toggle-off">'),e=$('<div class="toggle-blob">');a.on&&n.addClass("active");var k=d/2,p=j-k;n.css({height:d,width:p,textAlign:"center",textIndent:h?"":-k,lineHeight:d+"px"}).text(a.text.on);q.css({height:d,width:p,marginLeft:h?"":-k,textAlign:"center",textIndent:h?"":k,lineHeight:d+"px"}).text(a.text.off);e.css({height:d,
width:d,marginLeft:-k});b.css("width",2*j-d);h&&(c.css("width",2*p),e.hide());a.on&&(g.addClass("active"),a.checkbox.attr("checked",!0));c.html(g.html(b.append(n,e,q)));c.on("toggle",function(){var c=j,b=d,f=g.toggleClass("active").hasClass("active"),e=g.find(".inner").css(t);g.find(".toggle-off").toggleClass("active");g.find(".toggle-on").toggleClass("active");var h=f?0:-c+b;e.css("margin-left",h);a.checkbox.attr("checked",f);setTimeout(function(){e.css(u);e.css("margin-left",h)},a.animate)});if(a.click&&
(!a.clicker||!a.clicker.has(c).length))c.on("click",function(b){(b.target!=e[0]||!a.drag)&&c.trigger("toggle",!g.hasClass("active"))});if(a.clicker)a.clicker.on("click",function(b){(b.target!=e[0]||!a.drag)&&c.trigger("toggle",!g.hasClass("active"))});if(a.drag&&!h){var f,r=(j-d)/4,s=function(h){c.off("mousemove");g.off("mouseleave");e.off("mouseup");var m=g.hasClass("active");!f&&a.click&&"mouseleave"!==h.type?c.trigger("toggle",!m):m?f<-r?c.trigger("toggle",!m):b.animate({marginLeft:0},a.animate/
2):f>r?c.trigger("toggle",!m):b.animate({marginLeft:-j+d},a.animate/2)},l=-j+d;e.on("mousedown",function(a){f=0;e.off("mouseup");g.off("mouseleave");var d=a.pageX;c.on("mousemove",e,function(a){f=a.pageX-d;g.hasClass("active")?(a=f,0<f&&(a=0),f<l&&(a=l)):(a=f+l,0>f&&(a=l),f>-l&&(a=0));b.css("margin-left",a)});e.on("mouseup",s);g.on("mouseleave",s)})}})};})(jQuery);
