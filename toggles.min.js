(function($){$.fn.toggles=function(b){b=b||{};var a=$.extend({drag:!0,click:!0,text:{on:"ON",off:"OFF"},on:!0,animate:250,transition:"ease-in-out",checkbox:null,clicker:null,width:50,height:20},b);a.checkbox=$(a.checkbox);a.clicker&&(a.clicker=$(a.clicker));b="margin-left "+a.animate+"ms "+a.transition;var s={"-webkit-transition":b,"-moz-transition":b,transition:b},t={"-webkit-transition":"","-moz-transition":"",transition:""};return this.each(function(){var c=$(this),d=c.height(),j=c.width();if(!d||!j)c.height(d=
a.height),c.width(j=a.width);var g=$('<div class="slide">'),b=$('<div class="inner">'),m=$('<div class="on">'),n=$('<div class="off">'),f=$('<div class="blob">'),h=d/2,p=j-h;m.css({height:d,width:p,textAlign:"center",textIndent:-h,lineHeight:d+"px"}).text(a.text.on);n.css({height:d,width:p,marginLeft:-h,textAlign:"center",textIndent:h,lineHeight:d+"px"}).text(a.text.off);f.css({height:d,width:d,marginLeft:-h});b.css("width",2*j-d);a.on&&(g.addClass("active"),a.checkbox.attr("checked",!0));c.html(g.html(b.append(m,
f,n)));c.on("toggle",function(){var c=j,b=d,e=g.toggleClass("active").hasClass("active"),f=g.find(".inner").css(s),h=e?0:-c+b;f.css("margin-left",h);a.checkbox.attr("checked",e);setTimeout(function(){f.css(t);f.css("margin-left",h)},a.animate)});if(a.click&&(!a.clicker||!a.clicker.has(c).length))c.on("click",function(b){(b.target!=f[0]||!a.drag)&&c.trigger("toggle",!g.hasClass("active"))});if(a.clicker)a.clicker.on("click",function(b){(b.target!=f[0]||!a.drag)&&c.trigger("toggle",!g.hasClass("active"))});
if(a.drag){var e,q=(j-d)/4,r=function(h){c.off("mousemove");g.off("mouseleave");f.off("mouseup");var l=g.hasClass("active");!e&&a.click&&"mouseleave"!==h.type?c.trigger("toggle",!l):l?e<-q?c.trigger("toggle",!l):b.animate({marginLeft:0},a.animate/2):e>q?c.trigger("toggle",!l):b.animate({marginLeft:-j+d},a.animate/2)},k=-j+d;f.on("mousedown",function(a){e=0;f.off("mouseup");g.off("mouseleave");var d=a.pageX;c.on("mousemove",f,function(a){e=a.pageX-d;g.hasClass("active")?(a=e,0<e&&(a=0),e<k&&(a=k)):
(a=e+k,0>e&&(a=k),e>-k&&(a=0));b.css("margin-left",a)});f.on("mouseup",r);g.on("mouseleave",r)})}})};})(jQuery);
