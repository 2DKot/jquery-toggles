(function($){$.fn.toggles=function(b){b=b||{};var a=$.extend({drag:!0,click:!0,text:{on:"ON",off:"OFF"},on:!0,animate:250,transition:"ease-in-out",checkbox:null,clicker:null,width:50,height:20,type:"compact"},b),l="select"==a.type;a.checkbox=$(a.checkbox);a.clicker&&(a.clicker=$(a.clicker));b="margin-left "+a.animate+"ms "+a.transition;var s={"-webkit-transition":b,"-moz-transition":b,transition:b},t={"-webkit-transition":"","-moz-transition":"",transition:""};return this.each(function(){var h=$(this),d=h.height(),
k=h.width();if(!d||!k)h.height(d=a.height),h.width(k=a.width);var c=$('<div class="toggle-slide">'),b=$('<div class="toggle-inner">'),m=$('<div class="toggle-on">'),p=$('<div class="toggle-off">'),g=$('<div class="toggle-blob">');a.on&&m.addClass("active");var e=d/2,n=k-e;m.css({height:d,width:n,textAlign:"center",textIndent:l?"":-e,lineHeight:d+"px"}).text(a.text.on);p.css({height:d,width:n,marginLeft:l?"":-e,textAlign:"center",textIndent:l?"":e,lineHeight:d+"px"}).text(a.text.off);g.css({height:d,
width:d,marginLeft:-e});b.css("width",2*k-d);l&&(h.css("width",2*n),g.hide());a.on&&(c.addClass("active"),a.checkbox.attr("checked",!0));h.html(c.html(b.append(m,g,p)));c.on("toggle",function(b,f){b&&b.stopPropagation();h.trigger("toggle",f);var g=k,l=d,e=c.toggleClass("active").hasClass("active"),j=c.find(".toggle-inner").css(s);c.find(".toggle-off").toggleClass("active");c.find(".toggle-on").toggleClass("active");var m=e?0:-g+l;j.css("margin-left",m);a.checkbox.attr("checked",e);setTimeout(function(){j.css(t);
j.css("margin-left",m)},a.animate)});if(a.click&&(!a.clicker||!a.clicker.has(h).length))h.on("click",function(b){(b.target!=g[0]||!a.drag)&&c.trigger("toggle",!c.hasClass("active"))});if(a.clicker)a.clicker.on("click",function(b){(b.target!=g[0]||!a.drag)&&c.trigger("toggle",!c.hasClass("active"))});if(a.drag&&!l){var f,q=(k-d)/4,r=function(j){h.off("mousemove");c.off("mouseleave");g.off("mouseup");var e=c.hasClass("active");!f&&a.click&&"mouseleave"!==j.type?c.trigger("toggle",!e):e?f<-q?c.trigger("toggle",
!e):b.animate({marginLeft:0},a.animate/2):f>q?c.trigger("toggle",!e):b.animate({marginLeft:-k+d},a.animate/2)},j=-k+d;g.on("mousedown",function(a){f=0;g.off("mouseup");c.off("mouseleave");var d=a.pageX;h.on("mousemove",g,function(a){f=a.pageX-d;c.hasClass("active")?(a=f,0<f&&(a=0),f<j&&(a=j)):(a=f+j,0>f&&(a=j),f>-j&&(a=0));b.css("margin-left",a)});g.on("mouseup",r);c.on("mouseleave",r)})}})};})(jQuery);
