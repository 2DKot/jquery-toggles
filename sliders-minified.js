(function(e){e.fn.slide=function(k){var k=k||{},b={dragable:!0,clickable:!0,ontext:"ON",offtext:"OFF",on:!0,animtime:300,click:this},g;for(g in k)b[g]=k[g];this.each(function(){var c=e(this);b.click=k.click||c;var a=c.height(),d=c.width();if(0===a||0===d)c.height(a=20),c.width(d=50);var h=e('<div class="slide" />'),i=e('<div class="inner" />'),g=e('<div class="on" />'),l=e('<div class="off" />'),j=e('<div class="blob" />');g.css({height:a,width:d-a/2,textAlign:"center",textIndent:-a/2,lineHeight:a+
"px"}).text(b.ontext);l.css({height:a,width:d-a/2,marginLeft:-a/2,textAlign:"center",textIndent:a/2,lineHeight:a+"px"}).text(b.offtext);j.css({height:a,width:a,marginLeft:-a/2});i.css({width:2*d-a,marginLeft:b.on?0:-d+a});b.on&&(h.addClass("active"),b.checkbox&&e(b.checkbox).attr("checked",!0));c.html("");c.append(h.append(i.append(g,j,l)));var f=0,m;c.on("toggle",function(){var c=d,f=a,g=h.find(".inner");h.toggleClass("active");if(h.hasClass("active")){g.animate({marginLeft:0},b.animtime);b.checkbox&&
e(b.checkbox).attr("checked",true)}else{g.animate({marginLeft:-c+f},b.animtime);b.checkbox&&e(b.checkbox).attr("checked",false)}});b.clickable&&b.click.click(function(a){(a.target!=j[0]||!b.dragable)&&c.trigger("toggle")});b.dragable&&(j.on("mouseup",function(){c.off("mousemove");h.hasClass("active")?f<(-d+a)/2?c.trigger("toggle"):i.animate({marginLeft:0},b.animtime/2):f>(d-a)/2?c.trigger("toggle"):i.animate({marginLeft:-d+a},b.animtime/2);(+new Date-100<m||f===0)&&b.clickable&&c.trigger("toggle")}),
j.on("mousedown",function(b){m=+new Date;var e=b.pageX;c.on("mousemove",j,function(b){f=b.pageX-e;h.hasClass("active")?i.css({marginLeft:f<0?f<-d+a?-d+a:f:0}):i.css({marginLeft:f>0?f-d+a:-d+a})})}))})}})(jQuery);